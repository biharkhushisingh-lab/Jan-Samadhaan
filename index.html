<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ AI-Powered E-Grievance Platform</title>

    <!-- Google Maps API -->
    <!-- IMPORTANT: Replace YOUR_GOOGLE_MAPS_API_KEY with your actual API key -->
    <!-- Get your key from: https://console.cloud.google.com/google/maps-apis -->
    <script
        src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places&callback=initMap"></script>

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
            background-attachment: fixed;
            color: #1f2937;
            min-height: 100vh;
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(to right, #ff9933 0%, #ffffff 50%, #138808 100%);
            color: #1f2937;
            padding: 20px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 3px solid #000080;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .ashoka-chakra {
            width: 50px;
            height: 50px;
            border: 3px solid #000080;
            border-radius: 50%;
            position: relative;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: rotate 20s linear infinite;
        }

        .ashoka-chakra::before {
            content: '‚ò∏';
            font-size: 32px;
            color: #000080;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .header h2 {
            margin: 0;
            font-size: 1.6rem;
            font-weight: 700;
            color: #000080;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
        }

        /* Language Selector */
        .language-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .language-selector select {
            padding: 8px 15px;
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-weight: 600;
            cursor: pointer;
            outline: none;
        }

        .language-selector select option {
            background: #333;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 40px auto;
            background: linear-gradient(160deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.95) 100%);
            padding: 50px;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(20px);
        }

        #role-selection {
            display: flex;
            gap: 30px;
            padding: 50px 0;
        }

        .role-card {
            flex: 1;
            padding: 45px 35px;
            border-radius: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box,
                linear-gradient(135deg, #6366f1, #8b5cf6, #d946ef) border-box;
            position: relative;
            overflow: hidden;
        }

        .role-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
            transition: left 0.5s;
        }

        .role-card:hover::before {
            left: 100%;
        }

        .role-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 20px 50px rgba(99, 102, 241, 0.3), 0 0 0 2px rgba(99, 102, 241, 0.2);
            border-color: #6366f1;
        }

        .role-card h3 {
            font-size: 2rem;
            margin: 15px 0;
            font-weight: 700;
            background: linear-gradient(135deg, #6366f1, #8b5cf6, #d946ef);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .role-card p {
            color: #666;
            margin: 20px 0;
            line-height: 1.6;
        }

        .role-button {
            padding: 16px 45px;
            font-weight: 700;
            border-radius: 50px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.05rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
            letter-spacing: 0.5px;
        }

        .role-button:hover {
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 12px 30px rgba(99, 102, 241, 0.6);
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
        }

        .step-form {
            display: none;
        }

        .step-form.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 25px;
            left: 0;
            right: 0;
            height: 3px;
            background: #e0e0e0;
            z-index: 0;
        }

        .progress-step {
            position: relative;
            z-index: 1;
            flex: 1;
            text-align: center;
        }

        .progress-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #999;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
            transition: all 0.3s;
        }

        .progress-step.active .progress-circle {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            transform: scale(1.1);
        }

        .progress-label {
            display: block;
            font-size: 0.85rem;
            color: #666;
            font-weight: 500;
        }

        .progress-step.active .progress-label {
            color: #667eea;
            font-weight: 700;
        }

        h3 {
            color: #6366f1;
            border-bottom: 3px solid #6366f1;
            padding-bottom: 12px;
            margin-bottom: 30px;
            font-size: 1.75rem;
            font-weight: 700;
        }

        label {
            display: block;
            margin: 18px 0 8px;
            font-weight: 600;
            color: #374151;
            font-size: 0.95rem;
        }

        .mandatory::after {
            content: ' *';
            color: #ef4444;
            font-weight: 700;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 14px 18px;
            margin-bottom: 20px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: inherit;
            background: #ffffff;
        }

        input:focus,
        select:focus,
        textarea:focus {
            border-color: #6366f1;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1), 0 2px 8px rgba(99, 102, 241, 0.08);
            outline: none;
            transform: translateY(-1px);
        }

        input:hover,
        select:hover,
        textarea:hover {
            border-color: #a5b4fc;
        }

        .input-group {
            display: flex;
            gap: 10px;
            align-items: flex-start;
        }

        .input-group input {
            flex: 1;
            margin-bottom: 0;
        }

        .input-group button {
            flex-shrink: 0;
            margin-bottom: 0;
        }

        button {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            padding: 15px 32px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 700;
            font-size: 1.05rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
            letter-spacing: 0.3px;
        }

        button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 28px rgba(99, 102, 241, 0.5);
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
        }

        button:active {
            transform: translateY(-1px) scale(1);
        }

        button:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Map Styles */
        #map-container {
            margin: 20px 0;
            border: 3px solid #667eea;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        #map {
            height: 400px;
            width: 100%;
        }

        .map-info {
            background: linear-gradient(135deg, #667eea15, #764ba215);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .map-info p {
            margin: 5px 0;
            font-weight: 600;
            color: #555;
        }

        .map-controls {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }

        .map-controls button {
            flex: 1;
            padding: 10px;
            font-size: 0.9rem;
        }

        .translation-notice {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 255, 136, 0.1));
            border-left: 4px solid #00d4ff;
            padding: 12px;
            margin: 15px 0;
            border-radius: 8px;
            font-size: 0.9rem;
            color: #0066cc;
        }

        .ai-analysis-box {
            background: linear-gradient(135deg, #667eea15, #764ba215);
            border-left: 5px solid #667eea;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .ai-analysis-box h4 {
            margin: 0 0 15px;
            color: #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-tag {
            background: linear-gradient(45deg, #00d4ff, #00ff88);
            color: #000;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .dashboard-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border: 2px solid #e0e0e0;
        }

        .success-box {
            background: linear-gradient(135deg, #00d4ff15, #00ff8815);
            border-left: 5px solid #00ff88;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
        }

        .status-resolved {
            background: #d4edda;
            color: #155724;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-critical {
            background: #f8d7da;
            color: #721c24;
            animation: blink 1s infinite;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .priority-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.85rem;
        }

        .p-high {
            background: #ff4444;
            color: white;
        }

        .p-medium {
            background: #ffaa00;
            color: white;
        }

        .p-low {
            background: #44ff44;
            color: #000;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-left: 10px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .feedback-form {
            background: #fff;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #667eea;
        }

        .star-rating {
            display: flex;
            gap: 10px;
            font-size: 2rem;
            justify-content: center;
            margin: 20px 0;
        }

        .star {
            cursor: pointer;
            color: #ddd;
            transition: all 0.2s;
        }

        .star:hover,
        .star.active {
            color: #ffc107;
            transform: scale(1.2);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close-modal {
            float: right;
            font-size: 2rem;
            cursor: pointer;
            color: #999;
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: #667eea;
        }

        /* Voice-to-Text Styles */
        .voice-input-container {
            position: relative;
            margin-bottom: 20px;
        }

        .voice-button {
            position: absolute;
            right: 10px;
            bottom: 10px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #ee5a6f);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .voice-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.6);
        }

        .voice-button.listening {
            background: linear-gradient(45deg, #ee5a6f, #f7bb97);
            animation: voicePulse 1.5s ease-in-out infinite;
        }

        @keyframes voicePulse {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
            }

            50% {
                transform: scale(1.15);
                box-shadow: 0 10px 30px rgba(255, 107, 107, 0.8);
            }
        }

        .voice-status {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(238, 90, 111, 0.1));
            border-left: 4px solid #ff6b6b;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
            font-size: 0.9rem;
            color: #d63031;
            display: none;
            align-items: center;
            gap: 10px;
        }

        .voice-status.active {
            display: flex;
        }

        .voice-wave {
            display: inline-block;
            width: 4px;
            height: 20px;
            background: #ff6b6b;
            margin: 0 2px;
            animation: wave 1.2s ease-in-out infinite;
        }

        .voice-wave:nth-child(2) {
            animation-delay: 0.1s;
        }

        .voice-wave:nth-child(3) {
            animation-delay: 0.2s;
        }

        .voice-wave:nth-child(4) {
            animation-delay: 0.3s;
        }

        @keyframes wave {

            0%,
            100% {
                height: 20px;
            }

            50% {
                height: 5px;
            }
        }

        .voice-info-box {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.05), rgba(238, 90, 111, 0.05));
            border: 2px dashed #ff6b6b;
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            font-size: 0.9rem;
            color: #555;
        }

        .voice-info-box strong {
            color: #ff6b6b;
            display: block;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .accessibility-badge {
            background: linear-gradient(45deg, #ff6b6b, #ee5a6f);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }
    </style>
</head>

<body>

    <header class="header">
        <div class="header-title">
            <div class="ashoka-chakra"></div>
            <div>
                <h2 id="header-title">JAN SAMADHAAN</h2>
                <p style="margin: 0; font-size: 0.85rem; color: #000080; font-weight: 600;">‡§ú‡§® ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§®
                </p>
            </div>
        </div>

        <div class="language-selector">
            <div id="google_translate_element"></div>
            <script type="text/javascript">
                function googleTranslateElementInit() {
                    new google.translate.TranslateElement({ pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE }, 'google_translate_element');
                }
            </script>
            <script type="text/javascript"
                src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
        </div>
    </header>

    <div class="container">
        <div id="role-selection">
            <div class="role-card" onclick="showStep('citizen-verification')">
                <h3>üë§ Citizen Portal</h3>
                <p>File complaints with AI-powered priority assignment, real-time SLA tracking, intelligent department
                    routing, and multilingual support.</p>
                <button class="role-button">CITIZEN LOGIN ‚Üí</button>
            </div>

            <div class="role-card" onclick="window.location.href='official.html'">
                <h3>üèõÔ∏è Official Dashboard</h3>
                <p>Access AI-analyzed complaints with map visualization, auto-translation, escalation alerts, and
                    performance analytics.</p>
                <button class="role-button">OFFICIAL LOGIN‚Üí</button>
            </div>
        </div>

        <div id="progress-bar" style="display: none;" class="progress-bar">
            <div class="progress-step active" id="p-step-1">
                <span class="progress-circle">1</span>
                <span class="progress-label">Verification</span>
            </div>
            <div class="progress-step" id="p-step-2">
                <span class="progress-circle">2</span>
                <span class="progress-label">Details</span>
            </div>
            <div class="progress-step" id="p-step-3">
                <span class="progress-circle">3</span>
                <span class="progress-label">Dashboard</span>
            </div>
        </div>

        <form id="citizen-verification" class="step-form">
            <h3>üîê Identity Verification / Login</h3>

            <div id="translation-notice-1" class="translation-notice" style="display:none;">
                üåê Auto-translation enabled: Your complaint will be translated to English for officials
            </div>

            <label for="name" class="mandatory">Full Legal Name:</label>
            <input type="text" id="name" required placeholder="As per government ID">

            <label for="public-id" class="mandatory">Public ID (Aadhar/Voter/PAN):</label>
            <div class="input-group">
                <input type="text" id="public-id" placeholder="10-12 alphanumeric characters" pattern="[0-9A-Z]{10,12}"
                    maxlength="12" required>
                <button type="button" onclick="verifyId()">Verify</button>
            </div>
            <p id="id-status" style="color:#e74c3c; margin-top:5px; margin-bottom:20px; font-weight:600;">‚è≥ Awaiting
                Verification</p>

            <label for="phone" class="mandatory">Phone Number:</label>
            <div class="input-group">
                <input type="tel" id="phone" placeholder="10 digit mobile number" pattern="[0-9]{10}" maxlength="10"
                    required>
                <button type="button" onclick="sendOtp('phone')">Send OTP</button>
            </div>
            <div class="input-group">
                <input type="text" id="phone-otp" placeholder="Enter 6-digit OTP" maxlength="6" pattern="[0-9]{6}"
                    inputmode="numeric">
                <button type="button" onclick="verifyOtp('phone')">Verify OTP</button>
            </div>

            <label for="email" class="mandatory">Email Address:</label>
            <div class="input-group">
                <input type="email" id="email" placeholder="your.email@example.com" required>
                <button type="button" onclick="sendOtp('email')">Send OTP</button>
            </div>
            <div class="input-group">
                <input type="text" id="email-otp" placeholder="Enter 6-digit OTP" maxlength="6" pattern="[0-9]{6}"
                    inputmode="numeric">
                <button type="button" onclick="verifyOtp('email')">Verify OTP</button>
            </div>

            <button type="button" id="verify-continue-btn" onclick="checkHistoryAndContinue()">Continue ‚Üí</button>
        </form>

        <form id="complaint-submission" class="step-form">
            <h3>üìù Complaint Details</h3>

            <div id="translation-notice-2" class="translation-notice" style="display:none;">
                üåê You can type in your selected language. Officials will see it in English.
            </div>

            <label for="location-coords" class="mandatory">üìç Select Exact Location on Map:</label>

            <div class="map-info">
                <p>üó∫Ô∏è Click on the map to pinpoint the exact location of your complaint</p>
                <p id="selected-location" style="color: #667eea; font-weight: bold;">No location selected yet</p>
            </div>

            <div class="map-controls">
                <button type="button" onclick="getCurrentLocation()">üìç Use My Current Location</button>
                <button type="button" onclick="searchLocation()">üîç Search Address</button>
            </div>

            <div id="map-container">
                <div id="map"></div>
            </div>

            <input type="hidden" id="latitude" name="latitude">
            <input type="hidden" id="longitude" name="longitude">
            <input type="text" id="location-address"
                placeholder="Location will be auto-filled from map or enter manually" style="margin-top: 15px;">

            <label for="category">Category: <span style="color: #667eea; font-size: 0.9rem;">(Optional - AI will detect
                    if not selected)</span></label>
            <select id="category">
                <option value="">-- Select Category --</option>
                <option value="Roads_Infrastructure">üõ£Ô∏è Road Maintenance</option>
                <option value="Water_Supply">üíß Water Supply</option>
                <option value="Sanitation">üóëÔ∏è Sanitation</option>
                <option value="Public_Safety">üö® Public Safety</option>
                <option value="Illegal_Construction">üèóÔ∏è Illegal Construction</option>
                <option value="Public_Transport">üöå Public Transport</option>
                <option value="Health_Services">üè• Health Services</option>
                <option value="Education">üéì Education Facilities</option>
                <option value="Noise_Pollution">üîä Noise/Pollution</option>
                <option value="Power">‚ö° Electricity</option>
                <option value="Drainage">üö∞ Drainage/Sewerage</option>
                <option value="Parks">üå≥ Parks & Public Areas</option>
                <option value="Documents">üìÑ Document Delays</option>
                <option value="Misconduct">‚öñÔ∏è Official Misconduct</option>
                <option value="Animals">üêï Stray Animals</option>
                <option value="Trees">üå≤ Illegal Tree Cutting</option>
                <option value="Traffic">üö¶ Traffic Management</option>
                <option value="Taxes">üí∞ Tax Issues</option>
                <option value="Social_Welfare">ü§ù Social Welfare</option>
                <option value="Cyber">üíª Cyber/IT Issues</option>
                <option value="Other">üìã Other</option>
            </select>

            <label for="description" class="mandatory">Detailed Description:</label>
            <div class="voice-info-box" style="margin-top: 15px;">
                <strong>üéôÔ∏è Voice Input Available! <span class="accessibility-badge">BHARAT
                        ACCESSIBILITY</span></strong>
                Can'''t type? Click the microphone button and speak your complaint in your language.
            </div>

            <div id="voice-status" class="voice-status">
                üé§ Listening...
                <span class="voice-wave"></span>
                <span class="voice-wave"></span>
                <span class="voice-wave"></span>
                <span class="voice-wave"></span>
                (Click mic again to stop)
            </div>

            <div class="voice-input-container">
                <textarea id="description" rows="6" required
                    placeholder="Describe the issue in detail. Type in your language - auto-translation will help officials understand. Use words like 'urgent', 'dangerous', 'emergency' for faster response."></textarea>
                <button type="button" class="voice-button" onclick="toggleVoiceInput()"
                    title="Click to speak your complaint">üé§</button>
            </div>

            <label for="media-upload" class="mandatory">Proof (Photo/Video):</label>
            <input type="file" id="media-upload" accept="image/*,video/*" required>
            <p style="font-size: 0.85rem; color: #999; margin-top: -15px;">Max 16MB ‚Ä¢ PNG, JPG, MP4, AVI supported</p>

            <label style="display: block; margin: 25px 0 15px; font-weight: 600;">Submission Type:</label>
            <div style="display: flex; gap: 30px;">
                <label style="cursor: pointer; display: flex; align-items: center; gap: 8px;">
                    <input type="radio" name="submission-type" value="verified-id" checked
                        style="width: auto; margin: 0;">
                    <span>Verified Submission</span>
                </label>
                <label style="cursor: pointer; display: flex; align-items: center; gap: 8px;">
                    <input type="radio" name="submission-type" value="anonymous" style="width: auto; margin: 0;">
                    <span>Anonymous</span>
                </label>
            </div>

            <button type="button" id="submit-btn" onclick="submitComplaint()" style="margin-top: 30px;">ü§ñ Submit with
                AI Analysis</button>
        </form>

        <div id="citizen-dashboard" class="step-form">
            <h3 id="dashboard-greeting">Welcome, Citizen</h3>

            <div id="new-submission-confirmation" class="dashboard-section success-box" style="display: none;">
                <h4>‚úÖ Complaint Successfully Submitted!</h4>
                <div class="ai-analysis-box">
                    <h4>ü§ñ AI Analysis Complete <span class="ai-tag">POWERED BY GEMINI</span></h4>
                    <p><strong>Tracking ID:</strong> <span id="last-tracking-id"
                            style="font-family: monospace; font-size: 1.2rem; color: #667eea;">N/A</span></p>
                    <p><strong>AI-Calculated Priority:</strong> <span id="last-priority"
                            class="priority-badge p-high">N/A</span></p>
                    <p><strong>Assigned Department:</strong> <span id="last-department">N/A</span></p>
                    <p><strong>SLA Deadline:</strong> <span id="last-sla">N/A</span></p>
                    <p><strong>AI Sentiment Analysis:</strong> <span id="last-sentiment">N/A</span></p>
                    <p id="translation-confirmation" style="display:none; color: #00d4ff; font-weight: 600;">
                        üåê Your complaint has been auto-translated for officials
                    </p>
                </div>
            </div>

            <div class="dashboard-section">
                <h4>üìä My Complaints History</h4>
                <button onclick="loadComplaints()" style="margin-bottom: 20px; background: #28a745;">üîÑ Refresh
                    Status</button>
                <table id="complaint-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Category</th>
                            <th>Status</th>
                            <th>Priority</th>
                            <th>SLA</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="complaint-tbody">
                        <tr>
                            <td colspan="6" style="text-align: center;">Loading...</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <button onclick="showStep('complaint-submission')" style="background: #28a745;">‚ûï File New
                Complaint</button>

            <div style="margin-top: 40px; padding-top: 30px; border-top: 2px solid #e0e0e0; text-align: center;">
                <p style="color: #666; margin-bottom: 15px; font-size: 0.95rem;">
                    Want to file a complaint as a different user or access official portal?
                </p>
                <button onclick="returnToLoginPage()"
                    style="background: linear-gradient(45deg, #6c757d, #495057); font-size: 1rem; padding: 14px 35px;">
                    üè† Return to Login Page
                </button>
            </div>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div id="feedback-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeFeedback()">&times;</span>
            <h3>‚≠ê Rate This Resolution</h3>
            <p>Complaint ID: <strong id="feedback-complaint-id"></strong></p>

            <div class="star-rating">
                <span class="star" data-value="1">‚òÖ</span>
                <span class="star" data-value="2">‚òÖ</span>
                <span class="star" data-value="3">‚òÖ</span>
                <span class="star" data-value="4">‚òÖ</span>
                <span class="star" data-value="5">‚òÖ</span>
            </div>

            <label>Comments (optional):</label>
            <textarea id="feedback-comment" rows="4" placeholder="Share your experience..."></textarea>

            <button onclick="submitFeedback()" style="width: 100%; margin-top: 20px;">Submit Feedback</button>
        </div>
    </div>



    <script>
        const API = ''; // Use relative path for production
        let userName = '';
        let userPhone = '';
        let userEmail = '';
        let idVerified = false;
        let phoneOtpVerified = false;
        let emailOtpVerified = false;
        let currentFeedbackId = null;
        let selectedRating = 0;
        let selectedLanguage = 'en';

        // Map variables
        let map = null;
        let marker = null;
        let selectedLat = null;
        let selectedLon = null;

        // Store the generated OTPs for verification
        let phoneOtp = null;
        let emailOtp = null;

        function changeLanguage() {
            selectedLanguage = document.getElementById('language-select').value;
            console.log('Language changed to:', selectedLanguage);

            // Update header title based on language
            const headerTitles = {
                en: 'Bharat E-Grievance System', hi: '‡§≠‡§æ‡§∞‡§§ ‡§à-‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä',
                ta: '‡Æ™‡Ææ‡Æ∞‡Æ§ ‡ÆÆ‡Æø‡Æ©‡Øç-‡Æï‡ØÅ‡Æ±‡Øà‡Æ§‡ØÄ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡ØÅ ‡ÆÖ‡ÆÆ‡Øà‡Æ™‡Øç‡Æ™‡ØÅ', bn: '‡¶≠‡¶æ‡¶∞‡¶§ ‡¶á-‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ',
                mr: '‡§≠‡§æ‡§∞‡§§ ‡§à-‡§§‡§ï‡•ç‡§∞‡§æ‡§∞ ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä', te: '‡∞≠‡∞æ‡∞∞‡∞§‡±ç ‡∞à-‡∞´‡∞ø‡∞∞‡±ç‡∞Ø‡∞æ‡∞¶‡±Å ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡±ç‡∞•',
                gu: '‡™≠‡™æ‡™∞‡™§ ‡™à-‡™´‡™∞‡™ø‡™Ø‡™æ‡™¶ ‡™∏‡™ø‡™∏‡´ç‡™ü‡™Æ', kn: '‡≤≠‡≤æ‡≤∞‡≤§ ‡≤á-‡≤¶‡≥Ç‡≤∞‡≥Å ‡≤µ‡≥ç‡≤Ø‡≤µ‡≤∏‡≥ç‡≤•‡≥Ü',
                ml: '‡¥≠‡¥æ‡¥∞‡¥§ ‡¥á-‡¥™‡¥∞‡¥æ‡¥§‡¥ø ‡¥∏‡¥Ç‡¥µ‡¥ø‡¥ß‡¥æ‡¥®‡¥Ç', pa: '‡®≠‡®æ‡®∞‡®§ ‡®à-‡®∏‡®º‡®ø‡®ï‡®æ‡®á‡®§ ‡®™‡©ç‡®∞‡®£‡®æ‡®≤‡©Ä',
                or: '‡¨≠‡¨æ‡¨∞‡¨§ ‡¨á-‡¨Ö‡¨≠‡¨ø‡¨Ø‡≠ã‡¨ó ‡¨¨‡≠ç‡≠ü‡¨¨‡¨∏‡≠ç‡¨•‡¨æ', as: '‡¶≠‡¶æ‡ß∞‡¶§ ‡¶á-‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶¨‡ßç‡¶Ø‡ß±‡¶∏‡ßç‡¶•‡¶æ', ur: 'ÿ®⁄æÿßÿ±ÿ™ ÿß€å ÿ¥⁄©ÿß€åÿ™ ŸÜÿ∏ÿßŸÖ'
            };
            const headerElem = document.getElementById('header-title');
            if (headerElem && headerTitles[selectedLanguage]) {
                headerElem.textContent = headerTitles[selectedLanguage];
            }
            // Show/hide translation notices
            ['translation-notice-1', 'translation-notice-2'].forEach(id => {
                const e = document.getElementById(id);
                if (e) e.style.display = selectedLanguage !== 'en' ? 'block' : 'none';
            });
            console.log('Language updated:', selectedLanguage);
        }

        function initMap() {
            const defaultLat = 20.5937;
            const defaultLon = 78.9629;

            // Initialize Google Map
            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 5,
                center: { lat: defaultLat, lng: defaultLon },
                mapId: "DEMO_MAP_ID", // Optional: Use a specific map ID if needed
            });

            // Add click listener
            map.addListener("click", (e) => {
                selectLocation(e.latLng.lat(), e.latLng.lng());
            });

            // Geolocation
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        map.setCenter({ lat: lat, lng: lon });
                        map.setZoom(13);
                    },
                    (error) => {
                        console.log("Geolocation error:", error);
                    }
                );
            }
        }

        function selectLocation(lat, lon) {
            selectedLat = lat;
            selectedLon = lon;

            document.getElementById('latitude').value = lat;
            document.getElementById('longitude').value = lon;

            // Remove existing marker if any
            if (marker) {
                marker.setMap(null);
            }

            // Create new marker
            marker = new google.maps.Marker({
                position: { lat: lat, lng: lon },
                map: map,
                title: "Selected Location",
                animation: google.maps.Animation.DROP
            });

            // InfoWindow
            const infoWindow = new google.maps.InfoWindow({
                content: `<b>Selected Location</b><br>Lat: ${lat.toFixed(6)}<br>Lon: ${lon.toFixed(6)}`
            });
            infoWindow.open(map, marker);

            document.getElementById('selected-location').textContent =
                `‚úì Location selected: ${lat.toFixed(6)}, ${lon.toFixed(6)}`;
            document.getElementById('selected-location').style.color = '#28a745';

            reverseGeocode(lat, lon);

            // Check for duplicate complaints at this location
            checkDuplicateComplaints(lat, lon);
        }

        async function checkDuplicateComplaints(lat, lon) {
            try {
                const category = document.getElementById('category').value;

                const response = await fetch(API + '/api/check_duplicates', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        latitude: lat,
                        longitude: lon,
                        category: category,
                        radius: 20  // 20 meters
                    })
                });

                const data = await response.json();

                if (data.success && data.duplicates_found) {
                    showDuplicateWarning(data);
                } else {
                    hideDuplicateWarning();
                }
            } catch (error) {
                console.error('Error checking duplicates:', error);
                // Don't show error to user, just proceed
            }
        }

        function showDuplicateWarning(data) {
            // Remove existing warning if any
            let existingWarning = document.getElementById('duplicate-warning');
            if (existingWarning) {
                existingWarning.remove();
            }

            // Create warning box
            const warningDiv = document.createElement('div');
            warningDiv.id = 'duplicate-warning';
            warningDiv.style.cssText = `
            background: linear-gradient(135deg, #ff9933, #ffcc00);
            border: 3px solid #ff6600;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 20px rgba(255, 102, 0, 0.3);
            animation: shake 0.5s;
        `;

            let html = `
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                <span style="font-size: 3rem;">‚ö†Ô∏è</span>
                <div>
                    <h4 style="margin: 0; color: #000; font-size: 1.3rem;">Duplicate Alert!</h4>
                    <p style="margin: 5px 0 0 0; color: #333; font-weight: 600;">
                        ${data.count} similar complaint${data.count > 1 ? 's' : ''} found within ${data.radius_checked} meters
                    </p>
                </div>
            </div>
        `;

            if (data.nearby_complaints && data.nearby_complaints.length > 0) {
                html += `<div style="background: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px; margin-top: 15px;">`;
                html += `<p style="font-weight: bold; color: #000; margin-bottom: 10px;">üìã Existing Complaints:</p>`;

                data.nearby_complaints.forEach((complaint, idx) => {
                    const date = new Date(complaint.created_at).toLocaleDateString();
                    html += `
                    <div style="background: white; padding: 12px; margin-bottom: 10px; border-radius: 8px; border-left: 4px solid #ff6600;">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div style="flex: 1;">
                                <strong style="color: #667eea;">${complaint.id}</strong>
                                <span style="background: #e3f2fd; padding: 3px 8px; border-radius: 10px; font-size: 0.85rem; margin-left: 8px;">
                                    ${complaint.category}
                                </span>
                                <p style="margin: 8px 0; color: #555; font-size: 0.95rem;">${complaint.description}</p>
                                <small style="color: #888;">
                                    üìÖ ${date} ‚Ä¢ üìç ${complaint.distance}m away ‚Ä¢ 
                                    <span style="color: #ff6600; font-weight: 600;">${complaint.status}</span>
                                </small>
                            </div>
                        </div>
                    </div>
                `;
                });
                html += `</div>`;
            }

            html += `
            <div style="margin-top: 15px; padding: 12px; background: rgba(255,255,255,0.8); border-radius: 8px;">
                <p style="margin: 0; color: #000; font-weight: 600; font-size: 0.95rem;">
                    üí° <strong>Suggestion:</strong> Someone has already reported this issue. 
                    Your complaint may be a duplicate and could slow down resolution.
                </p>
                <p style="margin: 8px 0 0 0; color: #555; font-size: 0.9rem;">
                    You can still submit if you believe this is a different issue.
                </p>
            </div>
        `;

            warningDiv.innerHTML = html;

            // Insert before the category field
            const categoryLabel = document.querySelector('label[for="category"]');
            categoryLabel.parentNode.insertBefore(warningDiv, categoryLabel);

            // Add shake animation CSS if not exists
            if (!document.getElementById('shake-animation')) {
                const style = document.createElement('style');
                style.id = 'shake-animation';
                style.textContent = `
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                    20%, 40%, 60%, 80% { transform: translateX(5px); }
                }
            `;
                document.head.appendChild(style);
            }

            // Scroll to warning
            warningDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function hideDuplicateWarning() {
            const warning = document.getElementById('duplicate-warning');
            if (warning) {
                warning.remove();
            }
        }

        function reverseGeocode(lat, lon) {
            fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`)
                .then(response => response.json())
                .then(data => {
                    if (data.display_name) {
                        document.getElementById('location-address').value = data.display_name;
                    }
                })
                .catch(error => {
                    console.log('Reverse geocoding failed:', error);
                    document.getElementById('location-address').value = `${lat.toFixed(6)}, ${lon.toFixed(6)}`;
                });
        }

        function getCurrentLocation() {
            if (!navigator.geolocation) {
                alert('Geolocation is not supported by your browser');
                return;
            }

            const btn = event.target;
            btn.disabled = true;
            btn.textContent = 'üîÑ Getting location...';

            navigator.geolocation.getCurrentPosition(
                function (position) {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    map.setCenter({ lat: lat, lng: lon });
                    map.setZoom(16);
                    selectLocation(lat, lon);
                    btn.disabled = false;
                    btn.textContent = 'üìç Use My Current Location';
                },
                function (error) {
                    alert('Could not get your location: ' + error.message);
                    btn.disabled = false;
                    btn.textContent = 'üìç Use My Current Location';
                },
                { enableHighAccuracy: true, timeout: 10000 }
            );
        }

        function searchLocation() {
            const address = prompt('Enter address or place name (e.g., "Mumbai", "Connaught Place", "Delhi Airport"):');
            if (!address) return;

            const btn = event.target;
            btn.disabled = true;
            btn.textContent = 'üîç Searching...';

            // Try multiple search strategies for better results
            const searches = [
                // Strategy 1: India-specific search
                `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}&countrycodes=in&limit=10`,
                // Strategy 2: Global search (fallback)
                `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}&limit=10`
            ];

            // Try first search strategy
            fetch(searches[0])
                .then(response => response.json())
                .then(data => {
                    if (data.length > 0) {
                        handleSearchResults(data, btn);
                    } else {
                        // Try global search if India search fails
                        console.log('No results in India, trying global search...');
                        fetch(searches[1])
                            .then(response => response.json())
                            .then(globalData => {
                                if (globalData.length > 0) {
                                    handleSearchResults(globalData, btn);
                                } else {
                                    alert('‚ùå Location not found. Please try:\n\n' +
                                        '‚Ä¢ Adding more details (e.g., "Mumbai Station" instead of just "Station")\n' +
                                        '‚Ä¢ Using landmark names\n' +
                                        '‚Ä¢ Clicking directly on the map\n' +
                                        '‚Ä¢ Using "My Current Location" button');
                                    btn.disabled = false;
                                    btn.textContent = 'üîç Search Address';
                                }
                            })
                            .catch(error => {
                                alert('‚ùå Search failed: ' + error.message);
                                btn.disabled = false;
                                btn.textContent = 'üîç Search Address';
                            });
                    }
                })
                .catch(error => {
                    alert('‚ùå Search failed: ' + error.message + '\n\nPlease check your internet connection or try clicking on the map.');
                    btn.disabled = false;
                    btn.textContent = 'üîç Search Address';
                });
        }

        function handleSearchResults(data, btn) {
            if (data.length > 1) {
                // Multiple results - let user choose
                let options = 'üìç Multiple locations found. Choose one:\n\n';
                data.slice(0, 7).forEach((item, idx) => {
                    options += `${idx + 1}. ${item.display_name}\n`;
                });
                options += '\nEnter number (1-' + Math.min(7, data.length) + '):';

                const choice = prompt(options);
                const index = parseInt(choice) - 1;

                if (index >= 0 && index < data.length) {
                    const selected = data[index];
                    const lat = parseFloat(selected.lat);
                    const lon = parseFloat(selected.lon);
                    map.setCenter({ lat: lat, lng: lon });
                    map.setZoom(15);
                    selectLocation(lat, lon);
                    alert('‚úÖ Location set: ' + selected.display_name);
                } else {
                    alert('‚ùå Invalid selection. Using first result.');
                    const lat = parseFloat(data[0].lat);
                    const lon = parseFloat(data[0].lon);
                    map.setCenter({ lat: lat, lng: lon });
                    map.setZoom(15);
                    selectLocation(lat, lon);
                }
            } else {
                // Single result - use it directly
                const lat = parseFloat(data[0].lat);
                const lon = parseFloat(data[0].lon);
                map.setCenter({ lat: lat, lng: lon });
                map.setZoom(15);
                selectLocation(lat, lon);
                alert('‚úÖ Location found: ' + data[0].display_name);
            }
            btn.disabled = false;
            btn.textContent = 'üîç Search Address';
        }

        function showStep(formId) {
            document.querySelectorAll('.step-form').forEach(f => f.classList.remove('active'));
            document.getElementById(formId).classList.add('active');

            document.getElementById('role-selection').style.display = 'none';
            document.getElementById('progress-bar').style.display = 'flex';

            if (formId === 'complaint-submission' && !map) {
                setTimeout(initMap, 100);
            }

            const steps = {
                'citizen-verification': 1,
                'complaint-submission': 2,
                'citizen-dashboard': 3
            };

            document.querySelectorAll('.progress-step').forEach((s, i) => {
                s.classList.toggle('active', i < steps[formId]);
            });
        }

        function returnToLoginPage() {
            // Confirm before returning to login
            const confirmed = confirm('üîÑ Return to Login Page?\n\nThis will clear your current session. You can login as a new citizen or access the official portal.\n\nClick OK to continue.');

            if (confirmed) {
                // Clear all user data
                userName = '';
                userPhone = '';
                userEmail = '';
                idVerified = false;
                phoneOtpVerified = false;
                emailOtpVerified = false;
                phoneOtp = null;
                emailOtp = null;

                // Reset map data
                selectedLat = null;
                selectedLon = null;
                if (marker) {
                    marker.setMap(null);
                    marker = null;
                }

                // Clear all forms
                document.getElementById('citizen-verification').reset();
                document.getElementById('complaint-submission').reset();

                // Reset verification status display
                document.getElementById('id-status').textContent = '‚è≥ Awaiting Verification';
                document.getElementById('id-status').style.color = '#e74c3c';

                // Reset OTP fields styling
                const otpFields = ['phone-otp', 'email-otp'];
                otpFields.forEach(id => {
                    const field = document.getElementById(id);
                    field.style.borderColor = '#e0e0e0';
                    field.style.backgroundColor = 'white';
                });

                // Hide all step forms
                document.querySelectorAll('.step-form').forEach(f => f.classList.remove('active'));

                // Show role selection screen
                document.getElementById('role-selection').style.display = 'flex';
                document.getElementById('progress-bar').style.display = 'none';

                // Hide success confirmation
                document.getElementById('new-submission-confirmation').style.display = 'none';

                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });

                console.log('‚úÖ Returned to login page - all data cleared');
            }
        }

        function verifyId() {
            const id = document.getElementById('public-id').value;
            if (id.length >= 10) {
                idVerified = true;
                document.getElementById('id-status').textContent = '‚úÖ ID Verified';
                document.getElementById('id-status').style.color = '#28a745';
                alert('‚úÖ ID Verified Successfully!');
            } else {
                alert('‚ùå Invalid ID format');
            }
        }

        function sendOtp(type) {
            const field = document.getElementById(type);
            if (!field.value) {
                alert(`Please enter your ${type}`);
                return;
            }

            const mockOtp = Math.floor(100000 + Math.random() * 900000);

            // Store the OTP for verification
            if (type === 'phone') {
                phoneOtp = mockOtp.toString();
                phoneOtpVerified = false; // Reset verification status
            } else if (type === 'email') {
                emailOtp = mockOtp.toString();
                emailOtpVerified = false; // Reset verification status
            }

            alert(`üì± Mock OTP: ${mockOtp}\n\n(In production: sent via SMS/Email)\n\nPlease enter this OTP in the field below.`);
        }

        function verifyOtp(type) {
            const otpField = document.getElementById(type + '-otp');
            const enteredOtp = otpField.value.trim();

            if (!enteredOtp) {
                alert('‚ö†Ô∏è Please enter the OTP');
                return false;
            }

            if (enteredOtp.length !== 6) {
                alert('‚ö†Ô∏è OTP must be 6 digits');
                return false;
            }

            const correctOtp = type === 'phone' ? phoneOtp : emailOtp;

            if (!correctOtp) {
                alert('‚ö†Ô∏è Please send OTP first');
                return false;
            }

            if (enteredOtp === correctOtp) {
                if (type === 'phone') {
                    phoneOtpVerified = true;
                } else {
                    emailOtpVerified = true;
                }
                alert('‚úÖ OTP Verified Successfully!');
                otpField.style.borderColor = '#28a745';
                otpField.style.backgroundColor = '#d4edda';
                return true;
            } else {
                alert('‚ùå Invalid OTP. Please try again.');
                otpField.style.borderColor = '#dc3545';
                otpField.style.backgroundColor = '#f8d7da';
                return false;
            }
        }

        async function checkHistoryAndContinue() {
            if (!idVerified || !phoneOtpVerified || !emailOtpVerified) {
                alert('‚ö†Ô∏è Please complete all verification steps');
                return;
            }

            userName = document.getElementById('name').value;
            userPhone = document.getElementById('phone').value;
            userEmail = document.getElementById('email').value;

            const btn = document.getElementById('verify-continue-btn');
            btn.disabled = true;
            btn.innerHTML = 'Checking history... <span class="spinner"></span>';

            try {
                const res = await fetch(API + '/api/verify_citizen', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: userName, email: userEmail, phone: userPhone })
                });

                if (res.ok) {
                    showStep('complaint-submission');
                    document.getElementById('dashboard-greeting').textContent = `Welcome, ${userName}`;
                } else {
                    alert('‚ùå Verification failed');
                }
            } catch (e) {
                alert('‚ùå Server error');
            } finally {
                btn.disabled = false;
                btn.innerHTML = 'Continue ‚Üí';
            }
        }

        async function submitComplaint() {
            if (!selectedLat || !selectedLon) {
                alert('‚ö†Ô∏è Please select a location on the map');
                return;
            }

            const btn = document.getElementById('submit-btn');
            const orig = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = 'ü§ñ Analyzing with AI... <span class="spinner"></span>';

            try {
                const fd = new FormData();
                fd.append('citizen_name', userName);
                fd.append('citizen_email', userEmail);
                fd.append('citizen_phone', userPhone);
                fd.append('citizen_address', document.getElementById('location-address').value);
                fd.append('latitude', selectedLat);
                fd.append('longitude', selectedLon);
                fd.append('location_address', document.getElementById('location-address').value);
                fd.append('category', document.getElementById('category').value);
                fd.append('description', document.getElementById('description').value);
                fd.append('citizen_language', selectedLanguage);

                const file = document.getElementById('media-upload').files[0];
                if (file) fd.append('media_upload', file);

                const res = await fetch(API + '/api/submit_complaint', { method: 'POST', body: fd });

                if (!res.ok) {
                    if (res.status === 413) {
                        alert('‚ùå File too large. Maximum size is 16MB.');
                        return;
                    }
                    const text = await res.text();
                    try {
                        const err = JSON.parse(text);
                        alert('‚ùå Error: ' + (err.message || 'Server error'));
                    } catch (e) {
                        alert('‚ùå Server Error (' + res.status + '): ' + text.substring(0, 100)); // Show preview of HTML error
                    }
                    return;
                }

                const data = await res.json();

                if (data.success) {
                    document.getElementById('last-tracking-id').textContent = data.tracking_id;
                    document.getElementById('last-priority').textContent = `P-${data.priority}`;
                    document.getElementById('last-priority').className = `priority-badge ${data.priority <= 3 ? 'p-high' : data.priority <= 7 ? 'p-medium' : 'p-low'}`;
                    document.getElementById('last-department').textContent = data.department.replace(/_/g, ' ');
                    document.getElementById('last-sla').textContent = `${data.sla_hours}h (${data.sla_deadline})`;
                    document.getElementById('last-sentiment').textContent = data.ai_sentiment;

                    if (data.translation_done) {
                        document.getElementById('translation-confirmation').style.display = 'block';
                    }

                    // Show AI routing notification if department was auto-detected
                    if (data.ai_routed) {
                        alert('‚úÖ Complaint submitted!\n\nü§ñ AI automatically detected and routed your complaint to: ' + data.department.replace(/_/g, ' '));
                    }

                    document.getElementById('new-submission-confirmation').style.display = 'block';
                    showStep('citizen-dashboard');
                    document.getElementById('complaint-submission').reset();

                    // Reset map
                    selectedLat = null;
                    selectedLon = null;
                    if (marker) {
                        marker.setMap(null);
                        marker = null;
                    }
                    document.getElementById('selected-location').textContent = 'No location selected yet';
                    document.getElementById('selected-location').style.color = '#667eea';

                    // Load complaints history
                    loadComplaints();
                } else {
                    alert('‚ùå ' + data.message);
                }
            } catch (e) {
                console.error(e);
                alert('‚ùå Request Failed: ' + e.message + '\n\nPlease checks your network connection or backend status.');
            } finally {
                btn.disabled = false;
                btn.innerHTML = orig;
            }
        }

        async function loadComplaints() {
            const tbody = document.getElementById('complaint-tbody');
            tbody.innerHTML = '<tr><td colspan="6" style="text-align: center;">üîÑ Loading...</td></tr>';

            try {
                const res = await fetch(API + '/api/complaints');
                const data = await res.json();

                if (data.success) {
                    const mine = data.complaints.filter(c => c.citizen_phone === userPhone);
                    tbody.innerHTML = '';

                    if (mine.length === 0) {
                        tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #999;">No complaints found</td></tr>';
                        return;
                    }

                    mine.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

                    mine.forEach(c => {
                        const row = tbody.insertRow();
                        const statusClass = c.status.includes('Resolved') ? 'status-resolved' :
                            c.escalation_level === 'CRITICAL' ? 'status-critical' : 'status-pending';
                        const priClass = c.priority <= 3 ? 'p-high' : c.priority <= 7 ? 'p-medium' : 'p-low';

                        let actionBtn = '';
                        if (c.status.includes('Resolved') && !c.citizen_feedback_rating) {
                            actionBtn = `<button onclick="openFeedback('${c.id}')" style="padding: 6px 12px; font-size: 0.85rem;">‚≠ê Rate</button>`;
                        } else if (c.citizen_feedback_rating) {
                            actionBtn = `<span style="color: #28a745;">‚úÖ Rated ${c.citizen_feedback_rating}/5</span>`;
                        } else if (!c.status.includes('Resolved')) {
                            actionBtn = `<span style="color: #999; font-size:0.8rem;">Processing</span>`;
                        }

                        row.innerHTML = `
                        <td><code>${c.id}</code></td>
                        <td>${c.category}</td>
                        <td><span class="status-badge ${statusClass}">${c.status}</span></td>
                        <td><span class="priority-badge ${priClass}">P-${c.priority}</span></td>
                        <td>${c.escalation_level !== 'NONE' ? `<span class="status-badge status-critical">${c.escalation_level}</span>` : `${c.sla_hours}h`}</td>
                        <td>${actionBtn}</td>
                    `;
                    });
                }
            } catch (e) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #e74c3c;">Failed to load</td></tr>';
            }
        }

        function openFeedback(id) {
            currentFeedbackId = id;
            document.getElementById('feedback-complaint-id').textContent = id;
            document.getElementById('feedback-modal').style.display = 'block';
            selectedRating = 0;
            document.querySelectorAll('.star').forEach(s => s.classList.remove('active'));
            document.getElementById('feedback-comment').value = '';
        }

        function closeFeedback() {
            document.getElementById('feedback-modal').style.display = 'none';
        }

        document.querySelectorAll('.star').forEach(star => {
            star.addEventListener('click', function () {
                selectedRating = parseInt(this.dataset.value);
                document.querySelectorAll('.star').forEach((s, i) => {
                    s.classList.toggle('active', i < selectedRating);
                });
            });
        });

        async function submitFeedback() {
            if (selectedRating === 0) {
                alert('Please select a rating');
                return;
            }

            try {
                const res = await fetch(API + `/api/complaint/${currentFeedbackId}/feedback`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        rating: selectedRating,
                        comment: document.getElementById('feedback-comment').value
                    })
                });

                const data = await res.json();
                if (data.success) {
                    alert('‚úÖ Thank you for your feedback!');
                    closeFeedback();
                    loadComplaints();
                } else {
                    alert('‚ùå ' + data.message);
                }
            } catch (e) {
                alert('‚ùå Feedback submission failed');
            }
        }

        // ============= VOICE-TO-TEXT FUNCTIONALITY =============
        let recognition = null;
        let isListening = false;
        let finalTranscript = '';

        // Initialize voice recognition
        function initVoiceRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();

                // Configure recognition
                recognition.continuous = true;  // Keep listening until stopped
                recognition.interimResults = true;  // Show interim results
                recognition.maxAlternatives = 1;

                // Set initial language
                recognition.lang = getVoiceLanguageCode(selectedLanguage);

                recognition.onstart = function () {
                    console.log('Voice recognition started');
                    isListening = true;
                };

                recognition.onresult = function (event) {
                    let interimTranscript = '';

                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        const transcript = event.results[i][0].transcript;

                        if (event.results[i].isFinal) {
                            finalTranscript += transcript + ' ';
                        } else {
                            interimTranscript += transcript;
                        }
                    }

                    // Update textarea with transcribed text
                    document.getElementById('description').value = finalTranscript + interimTranscript;
                };

                recognition.onerror = function (event) {
                    console.error('Speech recognition error:', event.error);

                    if (event.error === 'no-speech') {
                        alert('‚ö†Ô∏è No speech detected. Please try again.');
                    } else if (event.error === 'not-allowed') {
                        alert('‚ùå Microphone access denied. Please allow microphone access and try again.');
                    } else {
                        alert('‚ùå Voice recognition error: ' + event.error);
                    }

                    stopVoiceInput();
                };

                recognition.onend = function () {
                    console.log('Voice recognition ended');
                    if (isListening) {
                        // Auto-restart if still supposed to be listening
                        try {
                            recognition.start();
                        } catch (e) {
                            stopVoiceInput();
                        }
                    }
                };

                console.log('‚úÖ Voice recognition initialized');
            } else {
                console.warn('‚ö†Ô∏è Speech recognition not supported in this browser');
            }
        }

        // Get language code for voice recognition
        function getVoiceLanguageCode(lang) {
            const codes = {
                'en': 'en-IN',  // English (India)
                'hi': 'hi-IN',  // Hindi
                'mr': 'mr-IN',  // Marathi
                'ta': 'ta-IN',  // Tamil
                'te': 'te-IN',  // Telugu
                'bn': 'bn-IN',  // Bengali
                'gu': 'gu-IN',  // Gujarati
                'kn': 'kn-IN',  // Kannada
                'ml': 'ml-IN',  // Malayalam
                'pa': 'pa-IN',  // Punjabi
                'or': 'or-IN',  // Odia
                'as': 'as-IN',  // Assamese
                'ur': 'ur-IN'   // Urdu
            };
            return codes[lang] || 'en-IN';
        }

        // Toggle voice input on/off
        function toggleVoiceInput() {
            if (!recognition) {
                alert('‚ùå Voice input is not supported in your browser.\n\nPlease use Chrome, Edge, or Safari.\n\nYou can still type your complaint normally.');
                return;
            }

            if (isListening) {
                stopVoiceInput();
            } else {
                startVoiceInput();
            }
        }

        // Start voice input
        function startVoiceInput() {
            // Update language if changed
            recognition.lang = getVoiceLanguageCode(selectedLanguage);

            // Store current text
            finalTranscript = document.getElementById('description').value;
            if (finalTranscript && !finalTranscript.endsWith(' ')) {
                finalTranscript += ' ';
            }

            try {
                recognition.start();
                isListening = true;

                // Update UI
                document.querySelector('.voice-button').classList.add('listening');
                document.querySelector('.voice-button').textContent = '‚è∏Ô∏è';
                document.querySelector('.voice-button').title = 'Click to stop recording';
                document.getElementById('voice-status').classList.add('active');

                console.log('üé§ Started listening in language:', recognition.lang);
            } catch (e) {
                console.error('Error starting recognition:', e);
                alert('‚ùå Could not start voice recognition. Please try again.');
            }
        }

        // Stop voice input
        function stopVoiceInput() {
            if (recognition && isListening) {
                isListening = false;

                try {
                    recognition.stop();
                } catch (e) {
                    console.error('Error stopping recognition:', e);
                }

                // Update UI
                document.querySelector('.voice-button').classList.remove('listening');
                document.querySelector('.voice-button').textContent = 'üé§';
                document.querySelector('.voice-button').title = 'Click to speak your complaint';
                document.getElementById('voice-status').classList.remove('active');

                console.log('‚èπÔ∏è Stopped listening');
            }
        }

        // Update the existing changeLanguage function to update voice recognition language and translate UI
        const originalChangeLanguage = changeLanguage;
        changeLanguage = function () {
            originalChangeLanguage();

            // Update header title
            const headerTitles = {
                en: 'Jan Samadhaan',
                hi: '‡§ú‡§® ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§®',
                ta: '‡Æú‡Æ©‡Øç ‡Æö‡ÆÆ‡Ææ‡Æ§‡Ææ‡Æ©‡Øç',
                bn: '‡¶ú‡¶® ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®',
                mr: '‡§ú‡§® ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§®',
                te: '‡∞ú‡∞®‡±ç ‡∞∏‡∞Æ‡∞æ‡∞ß‡∞æ‡∞®‡±ç',
                gu: '‡™ú‡™® ‡™∏‡™Æ‡™æ‡™ß‡™æ‡™®',
                kn: '‡≤ú‡≤® ‡≤∏‡≤Æ‡≤æ‡≤ß‡≤æ‡≤®‡≥ç',
                ml: '‡¥ú‡µª ‡¥∏‡¥Æ‡¥æ‡¥ß‡¥æ‡µª',
                pa: '‡®ú‡®® ‡®∏‡®Æ‡®æ‡®ß‡®æ‡®®',
                or: '‡¨ú‡¨® ‡¨∏‡¨Æ‡¨æ‡¨ß‡¨æ‡¨®',
                as: '‡¶ú‡¶® ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®',
                ur: 'ÿ¨ŸÜ ÿ≥ŸÖÿßÿØ⁄æÿßŸÜ'

            };
            const h = document.getElementById('header-title');
            if (h && headerTitles[selectedLanguage]) h.textContent = headerTitles[selectedLanguage];

            // Update Portal Cards (Citizen & Official)
            const portalTexts = {
                en: {
                    cp: 'üë§ Citizen Portal',
                    cd: 'File complaints with AI-powered priority assignment, real-time SLA tracking, intelligent department routing, and multilingual support.',
                    cb: 'CITIZEN LOGIN ‚Üí',
                    op: 'üèõÔ∏è Official Dashboard',
                    od: 'Access AI-analyzed complaints with map visualization, auto-translation, escalation alerts, and performance analytics.',
                    ob: 'OFFICIAL LOGIN ‚Üí'
                },
                hi: {
                    cp: 'üë§ ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤',
                    cd: '‡§è‡§Ü‡§à-‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§ ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§Ö‡§∏‡§æ‡§á‡§®‡§Æ‡•á‡§Ç‡§ü, ‡§∞‡•Ä‡§Ø‡§≤-‡§ü‡§æ‡§á‡§Æ ‡§è‡§∏‡§è‡§≤‡§è ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó, ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§æ‡§® ‡§µ‡§ø‡§≠‡§æ‡§ó ‡§∞‡•Ç‡§ü‡§ø‡§Ç‡§ó ‡§î‡§∞ ‡§¨‡§π‡•Å‡§≠‡§æ‡§∑‡•Ä ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§',
                    cb: '‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§≤‡•â‡§ó‡§ø‡§® ‚Üí',
                    op: 'üèõÔ∏è ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°',
                    od: '‡§Æ‡§æ‡§®‡§ö‡§ø‡§§‡•ç‡§∞ ‡§µ‡§ø‡§ú‡§º‡•Å‡§Ö‡§≤‡§æ‡§á‡§ú‡§º‡•á‡§∂‡§®, ‡§ë‡§ü‡•ã-‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶, ‡§è‡§∏‡•ç‡§ï‡•á‡§≤‡•á‡§∂‡§® ‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§î‡§∞ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§è‡§Ü‡§à-‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§ø‡§§ ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡•ã‡§Ç ‡§§‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö‡•á‡§Ç‡•§',
                    ob: '‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•â‡§ó‡§ø‡§® ‚Üí'
                },
                ta: {
                    cp: 'üë§ ‡Æï‡ØÅ‡Æü‡Æø‡ÆÆ‡Æï‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Øã‡Æ∞‡Øç‡Æü‡Øç‡Æü‡Æ≤‡Øç',
                    cd: 'AI-‡Æá‡ÆØ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ©‡ØÅ‡Æ∞‡Æø‡ÆÆ‡Øà ‡Æí‡Æ§‡ØÅ‡Æï‡Øç‡Æï‡ØÄ‡Æü‡ØÅ, ‡Æ®‡Æø‡Æï‡Æ¥‡Øç‡Æ®‡Øá‡Æ∞ SLA ‡Æï‡Æ£‡Øç‡Æï‡Ææ‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡ØÅ, ‡ÆÖ‡Æ±‡Æø‡Æµ‡Ææ‡Æ∞‡Øç‡Æ®‡Øç‡Æ§ ‡Æ§‡ØÅ‡Æ±‡Øà ‡Æµ‡Æ¥‡Æø‡Æö‡ØÜ‡Æ≤‡ØÅ‡Æ§‡Øç‡Æ§‡Æ≤‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Æ≤‡Øç‡ÆÆ‡Øä‡Æ¥‡Æø ‡ÆÜ‡Æ§‡Æ∞‡Æµ‡ØÅ‡Æü‡Æ©‡Øç ‡Æ™‡ØÅ‡Æï‡Ææ‡Æ∞‡Øç‡Æï‡Æ≥‡Øà ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç.',
                    cb: '‡Æï‡ØÅ‡Æü‡Æø‡ÆÆ‡Æï‡Øç‡Æï‡Æ≥‡Øç ‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà‡Æµ‡ØÅ ‚Üí',
                    op: 'üèõÔ∏è ‡ÆÖ‡Æ§‡Æø‡Æï‡Ææ‡Æ∞‡Æ™‡Øç‡Æ™‡ØÇ‡Æ∞‡Øç‡Æµ ‡Æü‡Ææ‡Æ∑‡Øç‡Æ™‡Øã‡Æ∞‡Øç‡Æü‡ØÅ',
                    od: '‡Æµ‡Æ∞‡Øà‡Æ™‡Æü ‡Æï‡Ææ‡Æü‡Øç‡Æö‡Æø‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ≤‡Øç, ‡Æ§‡Ææ‡Æ©‡Æø‡ÆØ‡Æô‡Øç‡Æï‡ØÅ ‡ÆÆ‡Øä‡Æ¥‡Æø‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡ØÅ, ‡Æ§‡ØÄ‡Æµ‡Æø‡Æ∞‡ÆÆ‡Ææ‡Æï‡Øç‡Æï‡Æ≤‡Øç ‡Æé‡Æö‡Øç‡Æö‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Øà‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æö‡ØÜ‡ÆØ‡Æ≤‡Øç‡Æ§‡Æø‡Æ±‡Æ©‡Øç ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ‡Æï‡Æ≥‡ØÅ‡Æü‡Æ©‡Øç AI-‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü ‡Æ™‡ØÅ‡Æï‡Ææ‡Æ∞‡Øç‡Æï‡Æ≥‡Øà ‡ÆÖ‡Æ£‡ØÅ‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.',
                    ob: '‡ÆÖ‡Æ§‡Æø‡Æï‡Ææ‡Æ∞‡Æ™‡Øç‡Æ™‡ØÇ‡Æ∞‡Øç‡Æµ ‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà‡Æµ‡ØÅ ‚Üí'
                },
                bn: {
                    cp: 'üë§ ‡¶®‡¶æ‡¶ó‡¶∞‡¶ø‡¶ï ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶æ‡¶≤',
                    cd: 'AI-‡¶ö‡¶æ‡¶≤‡¶ø‡¶§ ‡¶Ö‡¶ó‡ßç‡¶∞‡¶æ‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó, ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤-‡¶ü‡¶æ‡¶á‡¶Æ SLA ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç, ‡¶¨‡ßÅ‡¶¶‡ßç‡¶ß‡¶ø‡¶Æ‡¶æ‡¶® ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó ‡¶∞‡¶æ‡¶â‡¶ü‡¶ø‡¶Ç ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶π‡ßÅ‡¶≠‡¶æ‡¶∑‡¶ø‡¶ï ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ ‡¶∏‡¶π ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶¶‡¶æ‡¶ñ‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                    cb: '‡¶®‡¶æ‡¶ó‡¶∞‡¶ø‡¶ï ‡¶≤‡¶ó‡¶á‡¶® ‚Üí',
                    op: 'üèõÔ∏è ‡¶Ö‡¶´‡¶ø‡¶∏‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°',
                    od: '‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶≠‡¶ø‡¶ú‡ßç‡¶Ø‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶®, ‡¶Ö‡¶ü‡ßã-‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶, ‡¶è‡¶∏‡ßç‡¶ï‡ßá‡¶≤‡ßá‡¶∂‡¶® ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶æ‡¶∞‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶∏‡¶π AI-‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶ø‡¶§ ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                    ob: '‡¶Ö‡¶´‡¶ø‡¶∏‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶≤‡¶ó‡¶á‡¶® ‚Üí'
                }
            };

            // Marathi
            portalTexts.mr = { cp: 'üë§ ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤', cd: '‡§è‡§Ü‡§Ø-‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§™‡•ç‡§∞‡§æ‡§ß‡§æ‡§®‡•ç‡§Ø ‡§Ö‡§∏‡§æ‡§á‡§®‡§Æ‡•á‡§Ç‡§ü, ‡§∞‡§ø‡§Ö‡§≤-‡§ü‡§æ‡§á‡§Æ ‡§è‡§∏‡§è‡§≤‡§è ‡§ü‡•ç‡§∞‡•Ö‡§ï‡§ø‡§Ç‡§ó, ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§æ‡§® ‡§µ‡§ø‡§≠‡§æ‡§ó ‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§Ü‡§£‡§ø ‡§¨‡§π‡•Å‡§≠‡§æ‡§∑‡§ø‡§ï ‡§∏‡§Æ‡§∞‡•ç‡§•‡§®‡§æ‡§∏‡§π ‡§§‡§ï‡•ç‡§∞‡§æ‡§∞ ‡§¶‡§æ‡§ñ‡§≤ ‡§ï‡§∞‡§æ.', cb: '‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§≤‡•â‡§ó‡§ø‡§® ‚Üí', op: 'üèõÔ∏è ‡§Ö‡§ß‡§ø‡§ï‡•É‡§§ ‡§°‡•Ö‡§∂‡§¨‡•ã‡§∞‡•ç‡§°', od: '‡§®‡§ï‡§æ‡§∂‡§æ ‡§µ‡•ç‡§π‡§ø‡§ú‡•ç‡§Ø‡•Å‡§Ö‡§≤‡§æ‡§Ø‡§ù‡•á‡§∂‡§®, ‡§ë‡§ü‡•ã-‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶, ‡§è‡§∏‡•ç‡§ï‡•á‡§≤‡•á‡§∂‡§® ‡•≤‡§≤‡§∞‡•ç‡§ü ‡§Ü‡§£‡§ø ‡§™‡§∞‡§´‡•â‡§∞‡•ç‡§Æ‡§®‡•ç‡§∏ ‡•≤‡§®‡§æ‡§≤‡§ø‡§ü‡§ø‡§ï‡•ç‡§∏‡§∏‡§π ‡§è‡§Ü‡§Ø-‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§ø‡§§ ‡§§‡§ï‡•ç‡§∞‡§æ‡§∞‡•Ä‡§Ç‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§ï‡§∞‡§æ.', ob: '‡§Ö‡§ß‡§ø‡§ï‡•É‡§§ ‡§≤‡•â‡§ó‡§ø‡§® ‚Üí' };

            // Telugu
            portalTexts.te = { cp: 'üë§ ‡∞™‡±å‡∞∞ ‡∞™‡±ã‡∞∞‡±ç‡∞ü‡∞≤‡±ç', cd: 'AI-‡∞Ü‡∞ß‡∞æ‡∞∞‡∞ø‡∞§ ‡∞™‡±ç‡∞∞‡∞æ‡∞ß‡∞æ‡∞®‡±ç‡∞Ø‡∞§ ‡∞ï‡±á‡∞ü‡∞æ‡∞Ø‡∞ø‡∞Ç‡∞™‡±Å, ‡∞∞‡∞ø‡∞Ø‡∞≤‡±ç-‡∞ü‡±à‡∞Æ‡±ç SLA ‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç, ‡∞Æ‡±á‡∞ß‡±ã ‡∞∂‡∞æ‡∞ñ ‡∞∞‡±Ç‡∞ü‡∞ø‡∞Ç‡∞ó‡±ç ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞¨‡∞π‡±Å‡∞≠‡∞æ‡∞∑‡∞æ ‡∞Æ‡∞¶‡±ç‡∞¶‡∞§‡±Å‡∞§‡±ã ‡∞´‡∞ø‡∞∞‡±ç‡∞Ø‡∞æ‡∞¶‡±Å‡∞≤‡∞®‡±Å ‡∞¶‡∞æ‡∞ñ‡∞≤‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.', cb: '‡∞™‡±å‡∞∞ ‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç ‚Üí', op: 'üèõÔ∏è ‡∞Ö‡∞ß‡∞ø‡∞ï‡∞æ‡∞∞‡∞ø‡∞ï ‡∞°‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç', od: '‡∞Æ‡±ç‡∞Ø‡∞æ‡∞™‡±ç ‡∞µ‡∞ø‡∞ú‡±Å‡∞µ‡∞≤‡±à‡∞ú‡±á‡∞∑‡∞®‡±ç, ‡∞Ü‡∞ü‡±ã-‡∞ü‡±ç‡∞∞‡∞æ‡∞®‡±ç‡∞∏‡±ç‚Äå‡∞≤‡±á‡∞∑‡∞®‡±ç, ‡∞é‡∞∏‡±ç‡∞ï‡∞≤‡±á‡∞∑‡∞®‡±ç ‡∞Ö‡∞≤‡∞∞‡±ç‡∞ü‡±ç‚Äå‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞™‡∞®‡∞ø‡∞§‡±Ä‡∞∞‡±Å ‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞£‡∞≤‡∞§‡±ã AI-‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞ø‡∞Ç‡∞ö‡∞ø‡∞® ‡∞´‡∞ø‡∞∞‡±ç‡∞Ø‡∞æ‡∞¶‡±Å‡∞≤‡∞®‡±Å ‡∞Ø‡∞æ‡∞ï‡±ç‡∞∏‡±Ü‡∞∏‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.', ob: '‡∞Ö‡∞ß‡∞ø‡∞ï‡∞æ‡∞∞‡∞ø‡∞ï ‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç ‚Üí' };

            // Gujarati
            portalTexts.gu = { cp: 'üë§ ‡™®‡™æ‡™ó‡™∞‡™ø‡™ï ‡™™‡´ã‡™∞‡´ç‡™ü‡™≤', cd: 'AI-‡™∏‡™Ç‡™ö‡™æ‡™≤‡™ø‡™§ ‡™™‡´ç‡™∞‡™æ‡™•‡™Æ‡™ø‡™ï‡™§‡™æ ‡™∏‡´ã‡™Ç‡™™‡™£‡´Ä, ‡™∞‡´Ä‡™Ö‡™≤-‡™ü‡™æ‡™á‡™Æ SLA ‡™ü‡´ç‡™∞‡´á‡™ï‡™ø‡™Ç‡™ó, ‡™¨‡´Å‡™¶‡´ç‡™ß‡™ø‡™∂‡™æ‡™≥‡´Ä ‡™µ‡™ø‡™≠‡™æ‡™ó ‡™∞‡´Ç‡™ü‡´Ä‡™Ç‡™ó ‡™Ö‡™®‡´á ‡™¨‡™π‡´Å‡™≠‡™æ‡™∑‡´Ä ‡™∏‡™™‡´ã‡™∞‡´ç‡™ü ‡™∏‡™æ‡™•‡´á ‡™´‡™∞‡™ø‡™Ø‡™æ‡™¶‡´ã ‡™®‡´ã‡™Ç‡™ß‡™æ‡™µ‡´ã.', cb: '‡™®‡™æ‡™ó‡™∞‡™ø‡™ï ‡™≤‡´â‡™ó‡™ø‡™® ‚Üí', op: 'üèõÔ∏è ‡™Ö‡™ß‡™ø‡™ï‡´É‡™§ ‡™°‡´á‡™∂‡™¨‡´ã‡™∞‡´ç‡™°', od: '‡™®‡™ï‡™∂‡™æ ‡™µ‡™ø‡™ù‡´ç‡™Ø‡´Å‡™¨‡™≤‡™æ‡™á‡™ù‡´á‡™∂‡™®, ‡™ì‡™ü‡´ã-‡™ü‡´ç‡™∞‡™æ‡™®‡´ç‡™∏‡™≤‡´á‡™∂‡™®, ‡™è‡™∏‡´ç‡™ï‡´á‡™≤‡´á‡™∂‡™® ‡™ö‡´á‡™§‡™µ‡™£‡´Ä‡™ì ‡™Ö‡™®‡´á ‡™™‡´ç‡™∞‡™¶‡™∞‡´ç‡™∂‡™® ‡™µ‡™ø‡™∂‡´ç‡™≤‡´á‡™∑‡™£‡´ã ‡™∏‡™æ‡™•‡´á AI-‡™µ‡™ø‡™∂‡´ç‡™≤‡´á‡™∑‡™ø‡™§ ‡™´‡™∞‡™ø‡™Ø‡™æ‡™¶‡´ã‡™®‡´á ‡™ç‡™ï‡´ç‡™∏‡´á‡™∏ ‡™ï‡™∞‡´ã.', ob: '‡™Ö‡™ß‡™ø‡™ï‡´É‡™§ ‡™≤‡´â‡™ó‡™ø‡™® ‚Üí' };

            // Kannada
            portalTexts.kn = { cp: 'üë§ ‡≤®‡≤æ‡≤ó‡≤∞‡≤ø‡≤ï ‡≤™‡≥ã‡≤∞‡≥ç‡≤ü‡≤≤‡≥ç', cd: 'AI-‡≤ö‡≤æ‡≤≤‡≤ø‡≤§ ‡≤Ü‡≤¶‡≥ç‡≤Ø‡≤§‡≥Ü‡≤Ø ‡≤®‡≤ø‡≤Ø‡≥ã‡≤ú‡≤®‡≥Ü, ‡≤®‡≥à‡≤ú-‡≤∏‡≤Æ‡≤Ø‡≤¶ SLA ‡≤ü‡≥ç‡≤∞‡≥ç‡≤Ø‡≤æ‡≤ï‡≤ø‡≤Ç‡≤ó‡≥ç, ‡≤¨‡≥Å‡≤¶‡≥ç‡≤ß‡≤ø‡≤µ‡≤Ç‡≤§ ‡≤á‡≤≤‡≤æ‡≤ñ‡≥Ü ‡≤∞‡≥Ç‡≤ü‡≤ø‡≤Ç‡≤ó‡≥ç ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤¨‡≤π‡≥Å‡≤≠‡≤æ‡≤∑‡≤æ ‡≤¨‡≥Ü‡≤Ç‡≤¨‡≤≤‡≤¶‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤¶‡≥Ç‡≤∞‡≥Å‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≤≤‡≥ç‡≤≤‡≤ø‡≤∏‡≤ø.', cb: '‡≤®‡≤æ‡≤ó‡≤∞‡≤ø‡≤ï ‡≤≤‡≤æ‡≤ó‡≤ø‡≤®‡≥ç ‚Üí', op: 'üèõÔ∏è ‡≤Ö‡≤ß‡≤ø‡≤ï‡≥É‡≤§ ‡≤°‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç‚Äå‡≤¨‡≥ã‡≤∞‡≥ç‡≤°‡≥ç', od: '‡≤®‡≤ï‡≥ç‡≤∑‡≥Ü ‡≤¶‡≥É‡≤∂‡≥ç‡≤Ø‡≥Ä‡≤ï‡≤∞‡≤£, ‡≤∏‡≥ç‡≤µ‡≤Ø‡≤Ç-‡≤Ö‡≤®‡≥Å‡≤µ‡≤æ‡≤¶, ‡≤â‡≤≤‡≥ç‡≤¨‡≤£‡≤ó‡≥ä‡≤≥‡≥ç‡≤≥‡≥Å‡≤µ ‡≤é‡≤ö‡≥ç‡≤ö‡≤∞‡≤ø‡≤ï‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø‡≤ï‡≥ç‡≤∑‡≤Æ‡≤§‡≥Ü‡≤Ø ‡≤µ‡≤ø‡≤∂‡≥ç‡≤≤‡≥á‡≤∑‡≤£‡≥Ü‡≤ó‡≤≥‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü AI-‡≤µ‡≤ø‡≤∂‡≥ç‡≤≤‡≥á‡≤∑‡≤ø‡≤§ ‡≤¶‡≥Ç‡≤∞‡≥Å‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂‡≤ø‡≤∏‡≤ø.', ob: '‡≤Ö‡≤ß‡≤ø‡≤ï‡≥É‡≤§ ‡≤≤‡≤æ‡≤ó‡≤ø‡≤®‡≥ç ‚Üí' };

            // Malayalam
            portalTexts.ml = { cp: 'üë§ ‡¥™‡µó‡¥∞ ‡¥™‡µã‡µº‡¥ü‡µç‡¥ü‡µΩ', cd: 'AI- ‡¥™‡¥µ‡µº ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥® ‡¥Æ‡µÅ‡µª‡¥ó‡¥£‡¥®‡¥æ ‡¥Ö‡¥∏‡µà‡µª‡¥Æ‡µÜ‡µª‡µç‡¥±‡µç, ‡¥§‡¥§‡µç‡¥∏‡¥Æ‡¥Ø SLA ‡¥ü‡µç‡¥∞‡¥æ‡¥ï‡µç‡¥ï‡¥ø‡¥Ç‡¥ó‡µç, ‡¥á‡µª‡µç‡¥±‡¥≤‡¥ø‡¥ú‡µª‡µç‡¥±‡µç ‡¥°‡¥ø‡¥™‡µç‡¥™‡¥æ‡µº‡¥ü‡µç‡¥ü‡µç‚Äå‡¥Æ‡µÜ‡µª‡µç‡¥±‡µç ‡¥±‡µÇ‡¥ü‡µç‡¥ü‡¥ø‡¥Ç‡¥ó‡µç, ‡¥¨‡¥π‡µÅ‡¥≠‡¥æ‡¥∑‡¥æ ‡¥™‡¥ø‡¥®‡µç‡¥§‡µÅ‡¥£ ‡¥é‡¥®‡µç‡¥®‡¥ø‡¥µ ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ö‡µç‡¥ö‡µç ‡¥™‡¥∞‡¥æ‡¥§‡¥ø‡¥ï‡µæ ‡¥´‡¥Ø‡µΩ ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï.', cb: '‡¥™‡µó‡¥∞ ‡¥≤‡µã‡¥ó‡¥ø‡µª ‚Üí', op: 'üèõÔ∏è ‡¥î‡¥¶‡µç‡¥Ø‡µã‡¥ó‡¥ø‡¥ï ‡¥°‡¥æ‡¥∑‡µç‚Äå‡¥¨‡µã‡µº‡¥°‡µç', od: '‡¥Æ‡¥æ‡¥™‡µç‡¥™‡µç ‡¥µ‡¥ø‡¥∑‡µç‡¥µ‡¥≤‡µà‡¥∏‡µá‡¥∑‡µª, ‡¥ì‡¥ü‡µç‡¥ü‡µã-‡¥µ‡¥ø‡¥µ‡µº‡¥§‡µç‡¥§‡¥®‡¥Ç, ‡¥é‡¥∏‡µç‡¥ï‡¥≤‡µá‡¥∑‡µª ‡¥Ö‡¥≤‡µá‡µº‡¥ü‡µç‡¥ü‡µÅ‡¥ï‡µæ, ‡¥™‡µç‡¥∞‡¥ï‡¥ü‡¥® ‡¥Ö‡¥®‡¥≤‡¥ø‡¥±‡µç‡¥±‡¥ø‡¥ï‡µç‚Äå‡¥∏‡µç ‡¥é‡¥®‡µç‡¥®‡¥ø‡¥µ ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ö‡µç‡¥ö‡µç AI- ‡¥µ‡¥ø‡¥∂‡¥ï‡¥≤‡¥®‡¥Ç ‡¥ö‡µÜ‡¥Ø‡µç‡¥§ ‡¥™‡¥∞‡¥æ‡¥§‡¥ø‡¥ï‡µæ ‡¥Ü‡¥ï‡µç‚Äå‡¥∏‡¥∏‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï.', ob: '‡¥î‡¥¶‡µç‡¥Ø‡µã‡¥ó‡¥ø‡¥ï ‡¥≤‡µã‡¥ó‡¥ø‡µª ‚Üí' };

            // Punjabi
            portalTexts.pa = { cp: 'üë§ ‡®®‡®æ‡®ó‡®∞‡®ø‡®ï ‡®™‡©ã‡®∞‡®ü‡®≤', cd: 'AI-‡®∏‡©∞‡®ö‡®æ‡®≤‡®ø‡®§ ‡®§‡®∞‡®ú‡©Ä‡®π‡©Ä ‡®Ö‡®∏‡®æ‡®à‡®®‡®Æ‡©à‡®Ç‡®ü, ‡®∞‡©Ä‡®Ö‡®≤-‡®ü‡®æ‡®à‡®Æ SLA ‡®ü‡®∞‡©à‡®ï‡®ø‡©∞‡®ó, ‡®¨‡©Å‡©±‡®ß‡©Ä‡®Æ‡®æ‡®® ‡®µ‡®ø‡®≠‡®æ‡®ó ‡®∞‡©Ç‡®ü‡®ø‡©∞‡®ó ‡®Ö‡®§‡©á ‡®¨‡®π‡©Å-‡®≠‡®æ‡®∏‡®º‡®æ‡®à ‡®∏‡®π‡®æ‡®á‡®§‡®æ ‡®®‡®æ‡®≤ ‡®∏‡®º‡®ø‡®ï‡®æ‡®á‡®§‡®æ‡®Ç ‡®¶‡®∞‡®ú ‡®ï‡®∞‡©ã‡•§', cb: '‡®®‡®æ‡®ó‡®∞‡®ø‡®ï ‡®≤‡©å‡®ó‡®á‡®® ‚Üí', op: 'üèõÔ∏è ‡®Ö‡®ß‡®ø‡®ï‡®æ‡®∞‡®§ ‡®°‡©à‡®∏‡®º‡®¨‡©ã‡®∞‡®°', od: '‡®®‡®ï‡®∏‡®º‡©á ‡®¶‡©á ‡®¶‡©ç‡®∞‡®ø‡®∏‡®º‡®ü‡©Ä‡®ï‡©ã‡®£, ‡®Ü‡®ü‡©ã-‡®Ö‡®®‡©Å‡®µ‡®æ‡®¶, ‡®ê‡®∏‡®ï‡©á‡®≤‡©á‡®∏‡®º‡®® ‡®Ö‡®≤‡®∞‡®ü ‡®Ö‡®§‡©á ‡®™‡©ç‡®∞‡®¶‡®∞‡®∏‡®º‡®® ‡®µ‡®ø‡®∏‡®º‡®≤‡©á‡®∏‡®º‡®£ ‡®¶‡©á ‡®®‡®æ‡®≤ AI-‡®µ‡®ø‡®∏‡®º‡®≤‡©á‡®∏‡®º‡®£ ‡®∏‡®º‡®ø‡®ï‡®æ‡®á‡®§‡®æ‡®Ç ‡®§‡©±‡®ï ‡®™‡®π‡©Å‡©∞‡®ö ‡®ï‡®∞‡©ã‡•§', ob: '‡®Ö‡®ß‡®ø‡®ï‡®æ‡®∞‡®§ ‡®≤‡©å‡®ó‡®á‡®® ‚Üí' };

            // Odia
            portalTexts.or = { cp: 'üë§ ‡¨®‡¨æ‡¨ó‡¨∞‡¨ø‡¨ï ‡¨™‡≠ã‡¨∞‡≠ç‡¨ü‡¨æ‡¨≤‡≠ç', cd: 'AI- ‡¨ö‡¨æ‡¨≥‡¨ø‡¨§ ‡¨™‡≠ç‡¨∞‡¨æ‡¨•‡¨Æ‡¨ø‡¨ï‡¨§‡¨æ ‡¨®‡¨ø‡¨Ø‡≠Å‡¨ï‡≠ç‡¨§‡¨ø, ‡¨∞‡¨ø‡¨Ö‡¨≤‡≠ç-‡¨ü‡¨æ‡¨á‡¨Æ‡≠ç SLA ‡¨ü‡≠ç‡¨∞‡¨æ‡¨ï‡¨ø‡¨Ç, ‡¨¨‡≠Å‡¨¶‡≠ç‡¨ß‡¨ø‡¨Æ‡¨æ‡¨® ‡¨¨‡¨ø‡¨≠‡¨æ‡¨ó ‡¨∞‡¨æ‡¨â‡¨ü‡¨ø‡¨ô‡≠ç‡¨ó‡≠ç ‡¨è‡¨¨‡¨Ç ‡¨¨‡¨π‡≠Å‡¨≠‡¨æ‡¨∑‡≠Ä ‡¨∏‡¨Æ‡¨∞‡≠ç‡¨•‡¨® ‡¨∏‡¨π‡¨ø‡¨§ ‡¨Ö‡¨≠‡¨ø‡¨Ø‡≠ã‡¨ó ‡¨¶‡¨æ‡¨ñ‡¨≤ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å |', cb: '‡¨®‡¨æ‡¨ó‡¨∞‡¨ø‡¨ï ‡¨≤‡¨ó‡¨á‡¨®‡≠ç ‚Üí', op: 'üèõÔ∏è ‡¨Ö‡¨´‡¨ø‡¨∏‡¨ø‡¨Ü‡¨≤‡≠ç ‡¨°‡≠ç‡≠ü‡¨æ‡¨∏‡¨¨‡≠ã‡¨∞‡≠ç‡¨°', od: '‡¨Æ‡¨æ‡¨®‡¨ö‡¨ø‡¨§‡≠ç‡¨∞ ‡¨≠‡¨ø‡¨ú‡≠Å‡¨Ü‡¨≤‡¨æ‡¨á‡¨ú‡≠á‡¨∏‡¨®‡≠ç, ‡¨Ö‡¨ü‡≠ã-‡¨Ö‡¨®‡≠Å‡¨¨‡¨æ‡¨¶, ‡¨¨‡≠É‡¨¶‡≠ç‡¨ß‡¨ø ‡¨ö‡≠á‡¨§‡¨æ‡¨¨‡¨®‡≠Ä ‡¨è‡¨¨‡¨Ç ‡¨ï‡¨æ‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨¶‡¨ï‡≠ç‡¨∑‡¨§‡¨æ ‡¨¨‡¨ø‡¨∂‡≠ç‡¨≥‡≠á‡¨∑‡¨£ ‡¨∏‡¨π‡¨ø‡¨§ AI- ‡¨¨‡¨ø‡¨∂‡≠ç‡¨≥‡≠á‡¨∑‡¨ø‡¨§ ‡¨Ö‡¨≠‡¨ø‡¨Ø‡≠ã‡¨ó‡¨ó‡≠Å‡¨°‡¨ø‡¨ï ‡¨™‡≠ç‡¨∞‡¨¨‡≠á‡¨∂ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å |', ob: '‡¨Ö‡¨´‡¨ø‡¨∏‡¨ø‡¨Ü‡¨≤‡≠ç ‡¨≤‡¨ó‡¨á‡¨®‡≠ç ‚Üí' };

            // Assamese
            portalTexts.as = { cp: 'üë§ ‡¶®‡¶æ‡¶ó‡ß∞‡¶ø‡¶ï ‡¶™‡ß∞‡ßç‡¶ü‡ßá‡¶≤', cd: 'AI-‡¶ö‡¶æ‡¶≤‡¶ø‡¶§ ‡¶Ö‡¶ó‡ßç‡ß∞‡¶æ‡¶ß‡¶ø‡¶ï‡¶æ‡ß∞ ‡¶Ü‡ß±‡¶£‡ßç‡¶ü‡¶®, ‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡ß±-‡¶∏‡¶Æ‡¶Ø‡¶º‡ß∞ SLA ‡¶ü‡ßç‡ß∞‡ßá‡¶ï‡¶ø‡¶Ç, ‡¶¨‡ßÅ‡¶¶‡ßç‡¶ß‡¶ø‡¶Æ‡¶æ‡¶® ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó‡ß∞ ‡ß∞‡¶æ‡¶â‡¶ü‡¶ø‡¶Ç ‡¶Ü‡ß∞‡ßÅ ‡¶¨‡¶π‡ßÅ‡¶≠‡¶æ‡¶∑‡¶ø‡¶ï ‡¶∏‡¶Æ‡ß∞‡ßç‡¶•‡¶®‡ß∞ ‡¶∏‡ßà‡¶§‡ßá ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶¶‡¶æ‡¶ñ‡¶ø‡¶≤ ‡¶ï‡ß∞‡¶ï‡•§', cb: '‡¶®‡¶æ‡¶ó‡ß∞‡¶ø‡¶ï ‡¶™‡ßç‡ß∞‡ß±‡ßá‡¶∂ ‚Üí', op: 'üèõÔ∏è ‡¶ö‡ß∞‡¶ï‡¶æ‡ß∞‡ßÄ ‡¶°‡ßá‡¶∂‡ßç‡¶¨‡¶¨‚Äô‡ß∞‡ßç‡¶°', od: '‡¶Æ‡¶æ‡¶®‡¶ö‡¶ø‡¶§‡ßç‡ß∞ ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®, ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡ß∞‡¶ø‡¶Ø‡¶º ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶, ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø‡ß∞ ‡¶∏‡¶§‡ß∞‡ßç‡¶ï‡¶¨‡¶æ‡¶£‡ßÄ ‡¶Ü‡ß∞‡ßÅ ‡¶™‡ßç‡ß∞‡¶¶‡ß∞‡ßç‡¶∂‡¶® ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£‡ß∞ ‡¶∏‡ßà‡¶§‡ßá AI-‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶ø‡¶§ ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó‡¶∏‡¶Æ‡ßÇ‡¶π ‡¶™‡ßç‡ß∞‡ß±‡ßá‡¶∂ ‡¶ï‡ß∞‡¶ï‡•§', ob: '‡¶ö‡ß∞‡¶ï‡¶æ‡ß∞‡ßÄ ‡¶™‡ßç‡ß∞‡ß±‡ßá‡¶∂ ‚Üí' };

            // Urdu
            portalTexts.ur = { cp: 'üë§ ÿ¥€Åÿ±€å ŸæŸàÿ±ŸπŸÑ', cd: 'AI ÿ≥€í ⁄ÜŸÑŸÜ€í ŸàÿßŸÑ€å ÿ™ÿ±ÿ¨€åÿ≠€å ÿ™ŸÅŸà€åÿ∂ÿå ÿ±€åÿ¶ŸÑ Ÿπÿßÿ¶ŸÖ SLA Ÿπÿ±€å⁄©ŸÜ⁄Øÿå ÿ∞€Å€åŸÜ ŸÖÿ≠⁄©ŸÖ€Å ÿ±ŸàŸπŸÜ⁄Øÿå ÿßŸàÿ± ⁄©ÿ´€åÿ± ŸÑÿ≥ÿßŸÜ€å ŸÖÿπÿßŸàŸÜÿ™ ⁄©€í ÿ≥ÿßÿ™⁄æ ÿ¥⁄©ÿß€åÿßÿ™ ÿØÿ±ÿ¨ ⁄©ÿ±€å⁄∫€î', cb: 'ÿ¥€Åÿ±€å ŸÑÿß⁄Ø ÿßŸÜ ‚Üí', op: 'üèõÔ∏è ÿ≥ÿ±⁄©ÿßÿ±€å ⁄à€åÿ¥ ÿ®Ÿàÿ±⁄à', od: 'ŸÜŸÇÿ¥€Å ⁄©€í ÿ™ÿµŸàÿ±ÿå ÿÆŸàÿØ⁄©ÿßÿ± ÿ™ÿ±ÿ¨ŸÖ€Åÿå ÿßÿ∂ÿßŸÅ€Å ⁄©€í ÿßŸÜÿ™ÿ®ÿß€Åÿßÿ™ÿå ÿßŸàÿ± ⁄©ÿßÿ±⁄©ÿ±ÿØ⁄Ø€å ⁄©€í ÿ™ÿ¨ÿ≤€åÿßÿ™ ⁄©€í ÿ≥ÿßÿ™⁄æ AI ⁄©€í ÿ™ÿ¨ÿ≤€å€Å ⁄©ÿ±ÿØ€Å ÿ¥⁄©ÿß€åÿßÿ™ ÿ™⁄© ÿ±ÿ≥ÿßÿ¶€å ÿ≠ÿßÿµŸÑ ⁄©ÿ±€å⁄∫€î', ob: 'ÿ≥ÿ±⁄©ÿßÿ±€å ŸÑÿß⁄Ø ÿßŸÜ ‚Üí' };

            const pt = portalTexts[selectedLanguage] || portalTexts.en;
            const cards = document.querySelectorAll('.role-card');

            // Update Citizen Card
            if (cards[0]) {
                const h3 = cards[0].querySelector('h3');
                const p = cards[0].querySelector('p');
                const btn = cards[0].querySelector('.role-button');
                if (h3) h3.textContent = pt.cp;
                if (p) p.textContent = pt.cd;
                if (btn) btn.textContent = pt.cb;
            }

            // Update Official Card
            if (cards[1]) {
                const h3 = cards[1].querySelector('h3');
                const p = cards[1].querySelector('p');
                const btn = cards[1].querySelector('.role-button');
                if (h3) h3.textContent = pt.op;
                if (p) p.textContent = pt.od;
                if (btn) btn.textContent = pt.ob;
            }

            // Update voice recognition language if initialized
            if (recognition) {
                recognition.lang = getVoiceLanguageCode(selectedLanguage);
                console.log('üåê Voice recognition language updated to:', recognition.lang);
            }

            // If currently listening, restart with new language
            if (isListening) {
                stopVoiceInput();
                setTimeout(function () {
                    alert('üéôÔ∏è Language changed! Click the microphone to start speaking in ' +
                        document.getElementById('language-select').options[document.getElementById('language-select').selectedIndex].text);
                }, 500);
            }
        };

        // Initialize voice recognition when page loads
        window.addEventListener('DOMContentLoaded', function () {
            initVoiceRecognition();

            // Show voice support status
            if (recognition) {
                console.log('‚úÖ Voice input ready! Click the üé§ button to speak.');
            } else {
                console.warn('‚ö†Ô∏è Voice input not available in this browser.');
            }

            // Add listener to re-check duplicates when category changes
            const categorySelect = document.getElementById('category');
            if (categorySelect) {
                categorySelect.addEventListener('change', function () {
                    // Re-check duplicates if location is already selected
                    if (selectedLat && selectedLon) {
                        checkDuplicateComplaints(selectedLat, selectedLon);
                    }
                });
            }
        });

        // Stop voice input when form is submitted
        const originalSubmitComplaint = submitComplaint;
        submitComplaint = async function () {
            stopVoiceInput();
            await originalSubmitComplaint();
        };
    </script>
    </script>
</body>

</html>